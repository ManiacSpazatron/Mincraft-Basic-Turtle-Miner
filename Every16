--This version checks if the inventory is full every 16 blocks

local chunkCount = 1

while true do

local blockDetected = turtle.inspect()
local has_block, data = turtle.inspect()
local rightTurn = true

function mobDefense ()
    if not blockDetected and turtle.attack() or turtle.attackUp() then
    print("Mob detected in front. Attacking mob")
    turtle.attack()
    turtle.attackUp()
    sleep(2)
    mobDefense()
    end
end

for i = 1,16 do

--start of inventory check
    turtle.select(12)
    if turtle.getItemCount() == 0 then
        turtle.select(3)
    else
    if turtle.getItemCount() ~= 0 then
        turtle.dig()
        turtle.select(2)
        turtle.place()
        for i = 2,16 do 
            turtle.select(i)
            if turtle.getSelectedSlot() ~= 0 then
                turtle.drop()
            end
        end
    turtle.select(2)
    end
    end
--end of inventory check
--start of refuel
    if turtle.getFuelLevel() <= 100 then
        turtle.dig()
        turtle.select(1)
        turtle.place()
        turtle.suck()
        turtle.refuel()
        turtle.dig()
        turtle.select(3)
        print("Fuel level is: ",turtle.getFuelLevel())
    end
--end of refuel
    for i = 1,15 do
        mobDefense()
        if data.name == "minecraft:bedrock" then
            error("Hit bedrock...stopping the program")
        end
        turtle.dig()
        turtle.forward()
    end
    if (rightTurn == true and (not (i == 16))) then
        turtle.turnRight()
        turtle.dig()
        turtle.forward()
        turtle.turnRight()
        rightTurn = false
    else if (rightTurn == false and (not (i == 16))) then
        turtle.turnLeft()
        turtle.dig()
        turtle.forward()
        turtle.turnLeft()
        rightTurn = true
    end
    end
end
--go to the next layer down
    turtle.digDown()
    turtle.down()
    if rightTurn == true then
        turtle.turnLeft()
        rightTurn = false
    else
        turtle.turnRight()
        rightTurn = true
    end
    print(chunkCount)
    print("its still running...chunks done: ",chunkCount)
end
